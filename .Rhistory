plot.title = element_text(size=14)) # change title style
svi.mobile.mw <- svi.state_Midwest %>%
ggplot(aes(x = reorder(STATE, mobile.home.rate), y = mobile.home.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.08) +
xlab("State") +
ylab("Mobile Home Rate") +
ggtitle("Mobile Home Rate in Midwest US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.mobile.ne <- svi.state_Northeast %>%
ggplot(aes(x = reorder(STATE, mobile.home.rate), y = mobile.home.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.08) +
xlab("State") +
ylab("Mobile Home Rate") +
ggtitle("Mobile Home Rate in Northeast US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.mobile.s <- svi.state_South %>%
ggplot(aes(x = reorder(STATE, mobile.home.rate), y = mobile.home.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.08) +
xlab("State") +
ylab("Mobile Home Rate") +
ggtitle("Mobile Home Rate in South US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.mobile.w <- svi.state_West %>%
ggplot(aes(x = reorder(STATE, mobile.home.rate), y = mobile.home.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.08) +
xlab("State") +
ylab("Mobile Home Rate") +
ggtitle("Mobile Home Rate in West US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.minority.mw <- svi.state_Midwest %>%
ggplot(aes(x = reorder(STATE, minority.rate), y = minority.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.8) +
xlab("State") +
ylab("Minority Rate") +
ggtitle("Minority Rate in Midwest US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.minority.ne <- svi.state_Northeast %>%
ggplot(aes(x = reorder(STATE, minority.rate), y = minority.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.8) +
xlab("State") +
ylab("Minority Rate") +
ggtitle("Minority Rate in Northeast US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.minority.s <- svi.state_South %>%
ggplot(aes(x = reorder(STATE, minority.rate), y = minority.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.8) +
xlab("State") +
ylab("Minority Rate") +
ggtitle("Minority Rate in South US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.minority.w <- svi.state_West %>%
ggplot(aes(x = reorder(STATE, minority.rate), y = minority.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.8) +
xlab("State") +
ylab("Minority Rate") +
ggtitle("Minority Rate in West US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.disabled.mw <- svi.state_Midwest %>%
ggplot(aes(x = reorder(STATE, disabled.rate), y = disabled.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Disabled Rate") +
ggtitle("Disabled Rate in Midwest US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.disabled.ne <- svi.state_Northeast %>%
ggplot(aes(x = reorder(STATE, disabled.rate), y = disabled.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Disabled Rate") +
ggtitle("Disabled Rate in Northeast US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.disabled.s <- svi.state_South %>%
ggplot(aes(x = reorder(STATE, disabled.rate), y = disabled.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Disabled Rate") +
ggtitle("Disabled Rate in South US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.disabled.w <- svi.state_West %>%
ggplot(aes(x = reorder(STATE, disabled.rate), y = disabled.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Disabled Rate") +
ggtitle("Disabled Rate in West US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.old.mw <- svi.state_Midwest %>%
ggplot(aes(x = reorder(STATE, age65.rate), y = age65.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Age over 65 Rate") +
ggtitle("Age over 65 Rate in Midwest US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.old.ne <- svi.state_Northeast %>%
ggplot(aes(x = reorder(STATE, age65.rate), y = age65.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Age over 65 Rate") +
ggtitle("Age over 65 Rate in Northeast US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.old.s <- svi.state_South %>%
ggplot(aes(x = reorder(STATE, age65.rate), y = age65.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Age over 65 Rate") +
ggtitle("Age over 65 Rate in South US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.old.w <- svi.state_West %>%
ggplot(aes(x = reorder(STATE, age65.rate), y = age65.rate, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 0.2) +
xlab("State") +
ylab("Age over 65 Rate") +
ggtitle("Age over 65 Rate in West US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.pci.mw <- svi.state_Midwest %>%
ggplot(aes(x = reorder(STATE, per.capita), y = per.capita, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 55000) +
xlab("State") +
ylab("Per Capita Income") +
ggtitle("Per Capita Income in Midwest US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.pci.ne <- svi.state_Northeast %>%
ggplot(aes(x = reorder(STATE, per.capita), y = per.capita, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 55000) +
xlab("State") +
ylab("Per Capita Income") +
ggtitle("Per Capita Income in Northeast US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.pci.s <- svi.state_South %>%
ggplot(aes(x = reorder(STATE, per.capita), y = per.capita, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
ylim(0, 55000) +
xlab("State") +
ylab("Per Capita Income") +
ggtitle("Per Capita Income in South US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
svi.pci.w <- svi.state_West %>%
ggplot(aes(x = reorder(STATE, per.capita), y = per.capita, color = STATE, fill = STATE)) +
geom_bar(stat = "identity") +
coord_flip()+
geom_text(x=13, y =10800, label = "New Mexico data missing",
size = 5, color = "black")+
ylim(0, 55000) +
xlab("State") +
ylab("Per Capita Income") +
ggtitle("Per Capita Income in West US") +
theme_minimal() +
theme(legend.position = 'none', # remove legend,
axis.title = element_text(size=12), # change axis style
legend.title = element_text(size=12), # change legend style
plot.title = element_text(size=14)) # change title style
### New Mexico data missing
<<<<<<< Updated upstream
svi.analysis <- svi.state %>%
select(c(STATE, poverty.rate, per.capita, no.HS.rate, age65.rate, disabled.rate, minority.rate, uninsured.rate)) %>%
mutate(state = STATE)
=======
View(US_Region_2020_mobility)
View(US_State_2020_mobility_without_county)
View(US_State_2020_mobility_without_county)
View(covid)
View(covid.time.series)
glimpse(svi.state)
View(svi.state)
View(svi.state)
?select
svi.analysis <- svi.state %>%
select(c(STATE, poverty.rate, per.capita, no.HS.rate, age65.rate, disabled.rate, minority.rate, uninsured.rate))
View(svi.analysis)
View(svi.analysis)
covid.mortality <- covid.time.series %>%
filter(date == as.Date("2020-10-24"))
covid.mortality
covid.mortality <- covid.time.series %>%
filter(date == as.Date("2020-10-24")) %>%
mutate(morality.rate = cumulative.death.cases / cumulative.confirmed.cases)
covid.mortality
glimpse(covid.mortality)
svi.analysis <- svi.state %>%
select(c(STATE, poverty.rate, per.capita, no.HS.rate, age65.rate, disabled.rate, minority.rate, uninsured.rate))
covid.mortality <- covid.time.series %>%
filter(date == as.Date("2020-10-24")) %>%
mutate(mortality.avg = cumulative.death.cases / cumulative.confirmed.cases)
glimpse(covid.death.midwest)
glimpse(covid.mortality)
covid.mortality <- covid.time.series %>%
filter(date == as.Date("2020-10-24")) %>%
mutate(mortality.avg = (cumulative.death.cases / cumulative.confirmed.cases)*100)
glimpse(covid.mortality)
>>>>>>> Stashed changes
covid.mortality <- covid.time.series %>%
filter(date == as.Date("2020-10-24")) %>%
mutate(mortality.avg = (cumulative.death.cases / cumulative.confirmed.cases)*100) %>%
select(state, mortality.avg)
<<<<<<< Updated upstream
svi.mortality <- svi.analysis %>%
inner_join(covid.mortality, by = "state") %>%
select(-state)
covid.active <- covid.time.series %>%
select(c(state, date, active.rates)) %>%
mutate(lag.active.rates = date - 5)
=======
covid.mortality
svi.analysis$STATE <- tolower(svi.analysis$STATE)
svi.analysis
svi.analysis <- svi.state %>%
select(c(STATE, poverty.rate, per.capita, no.HS.rate, age65.rate, disabled.rate, minority.rate, uninsured.rate))
?rename
svi.analysis <- svi.state %>%
select(c(STATE, poverty.rate, per.capita, no.HS.rate, age65.rate, disabled.rate, minority.rate, uninsured.rate)) %>%
mutate(state = STATE)
svi.analysis
svi.mortality <- svi.analysis %>%
inner_join(covid.mortality, by = "state")
svi.mortality
svi.mortality <- svi.analysis %>%
inner_join(covid.mortality, by = "state") %>%
select(-state)
svi.mortality
dates <- format(seq(from = as.Date("2020/04/13"), to = as.Date("2020/10/24"), by = "day"), "%m-%d-%Y")
date = "04-12-2020"
reports.raw <- read_csv(paste("./datasets/csse_covid_19_daily_reports_us/", date, ".csv", sep = ""))
report <- reports.raw %>%
select(-c(Country_Region, Last_Update, Lat, Long_, Confirmed, Deaths, FIPS, UID, ISO3)) %>%
rename(state = Province_State,
recovered.cases = Recovered,
active.cases = Active,
incident.rate = Incident_Rate, # positive results per 100,000 persons.
people.tested = People_Tested,
people.hospitalized = People_Hospitalized,
mortality.rate = Mortality_Rate,
testing.rate = Testing_Rate,
hospitalization.rate = Hospitalization_Rate) %>%
filter(state %in% c(state.name, "District of Columbia")) %>%
mutate(date = as.Date(date, format = "%m-%d-%y"),
# month = match(months(date), month.name),
incident.rate = incident.rate/1000,
# based on documentation (100k population)
testing.rate = testing.rate/1000,
# added normalized active rates
active.rates = active.cases / population) %>%
select(-c(people.hospitalized, hospitalization.rate, recovered.cases))
glimpse(reports.raw)
dates <- format(seq(from = as.Date("2020/04/13"), to = as.Date("2020/10/24"), by = "day"), "%m-%d-%Y")
date = "04-12-2020"
reports.raw <- read_csv(paste("./datasets/csse_covid_19_daily_reports_us/", date, ".csv", sep = ""))
report <- reports.raw %>%
select(-c(Country_Region, Last_Update, Lat, Long_, Confirmed, Deaths, FIPS, UID, ISO3)) %>%
rename(state = Province_State,
recovered.cases = Recovered,
active.cases = Active,
incident.rate = Incident_Rate, # positive results per 100,000 persons.
people.tested = People_Tested,
people.hospitalized = People_Hospitalized,
mortality.rate = Mortality_Rate,
testing.rate = Testing_Rate,
hospitalization.rate = Hospitalization_Rate) %>%
filter(state %in% c(state.name, "District of Columbia")) %>%
mutate(date = as.Date(date, format = "%m-%d-%y"),
# month = match(months(date), month.name),
incident.rate = incident.rate/1000,
# based on documentation (100k population)
testing.rate = testing.rate/1000) %>%
select(-c(people.hospitalized, hospitalization.rate, recovered.cases))
for (date in dates){
reports.raw <- read_csv(paste("./datasets/csse_covid_19_daily_reports_us/", date, ".csv", sep = ""))
rpt <- reports.raw %>%
select(-c(Country_Region, Last_Update, Lat, Long_, Confirmed, Deaths, FIPS, UID, ISO3)) %>%
rename(state = Province_State,
recovered.cases = Recovered,
active.cases = Active,
incident.rate = Incident_Rate,
people.tested = People_Tested,
people.hospitalized = People_Hospitalized,
mortality.rate = Mortality_Rate,
testing.rate = Testing_Rate,
hospitalization.rate = Hospitalization_Rate) %>%
filter(state %in% c(state.name, "District of Columbia")) %>%
mutate(date = as.Date(date, format = "%m-%d-%y"),
# month = match(months(date), month.name),
incident.rate = incident.rate/1000,
testing.rate = testing.rate/1000) %>%
select(-c(people.hospitalized, hospitalization.rate, recovered.cases))
### North Dekota has > 100% testing rate
report <- rbind(report, rpt)
}
reports <- report[c(1, 6, 7, 2, 3, 4, 5)][order(report$state, report$date),]
covid.time.series <- covid %>%
full_join(reports, by = c("state","date")) %>%
mutate(active.rates = active.cases / population) # added normalized active rates
# covid.time.series <- reports
# View(covid.time.series)
#write.csv(covid.time.series, "E:/UCSD/2020-2021 Senior/PSYC 201 Project/CJHU Databse/covid time series version 1.csv")
covid.time.series <- covid %>%
full_join(reports, by = c("state","date")) %>%
mutate(active.rates = 100*(active.cases / population)) # added normalized active rates
covid.active <- covid.time.series %>%
select(c(state, date, active.rates)) %>%
mutate(lag.active.rates = date - 5)
covid.active
View(covid.active)
View(covid.active)
View(StateMonthMobility)
View(StateMonthmobility)
covid.active <- covid.time.series %>%
select(c(state, date, active.rates)) %>%
mutate(lag.active.rates = date - 5)
mobility.active <- StateMonthMobility %>%
merge(covid.active, by.x = c(sub_region_1, date), by.y = c(state, lag.active.rates))
mobility.active <- merge(StateMonthMobility, covid.active, by.x = c(sub_region_1, date), by.y = c(state, lag.active.rates))
mobility.active <- merge(StateMonthMobility, covid.active, by.x = c("sub_region_1", "date"), by.y = c("state", "lag.active.rates"))
mobility.active
glimpse(mobility.active)
View(mobility.active)
View(mobility.active)
>>>>>>> Stashed changes
mobility.active <- merge(StateMonthMobility, covid.active, by.x = c("sub_region_1", "date"), by.y = c("state", "lag.active.rates"))
mobility.active <- mobility.active %>%
mutate(state = sub_region_1) %>%
select(c(state, date, retail_and_recreation_percent_change_from_baseline, grocery_and_pharmacy_percent_change_from_baseline,
parks_percent_change_from_baseline, transit_stations_percent_change_from_baseline, workplaces_percent_change_from_baseline,
residential_percent_change_from_baseline, active.rates)) %>%
filter(date >= as.Date("2020-04-07"))
<<<<<<< Updated upstream
covid.death.midwest
covid.death.northeast
covid.death.south
covid.death.west
covid.confirm.midwest
covid.confirm.northeast
covid.confirm.south
covid.confirm.west
covid.test.rate.midwest
covid.test.rate.northeast
covid.test.rate.south
covid.test.rate.west
covid.incident.rate.midwest
covid.incident.rate.northeast
covid.incident.rate.south
covid.incident.rate.west
mobility.r.midwest
mobility.r.northeast
mobility.r.south
mobility.r.west
mobility.gp.midwest
mobility.gp.northeast
mobility.gp.south
mobility.gp.west
mobility.parks.midwest
mobility.parks.northeast
mobility.parks.south
mobility.parks.west
mobility.transit.midwest
mobility.transit.northeast
mobility.transit.south
mobility.transit.west
mobility.work.midwest
mobility.work.northeast
mobility.work.south
mobility.work.west
mobility.res.midwest
mobility.res.northeast
mobility.res.south
mobility.res.west
unemploy.mw
unemploy.ne
unemploy.s
unemploy.w
svi.pov.mw
svi.pov.ne
svi.pov.s
svi.pov.w
svi.uninsured.mw
svi.uninsured.ne
svi.uninsured.s
svi.uninsured.w
svi.mobile.mw
svi.mobile.ne
svi.mobile.s
svi.mobile.w
svi.minority.mw
svi.minority.ne
svi.minority.s
svi.minority.w
svi.disabled.mw
svi.disabled.ne
svi.disabled.s
svi.disabled.w
svi.old.mw
svi.old.ne
svi.old.s
svi.old.w
svi.pci.mw
svi.pci.ne
svi.pci.s
svi.pci.w
save.image("E:/UCSD/2020-2021 Senior/PSYC 201 Project/covid_project/.Rhistory.RData")
=======
View(mobility.active)
>>>>>>> Stashed changes
